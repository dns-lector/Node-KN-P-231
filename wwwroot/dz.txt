Перевірка startsWith('application/json') має недолік:
вона пропустить заголовок на кшталт
'application/json2'
'application/jsonNot; charset=utf-8'
Задача: реалізувати більш досконалу перевірку заголовку content-type
як з боку клієнта, так і з боку сервера.
Провести необхідні тести
Правильні варіанти:
'application/json'
'application/json; charset=utf-8'